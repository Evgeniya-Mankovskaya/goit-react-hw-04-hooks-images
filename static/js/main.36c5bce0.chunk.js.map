{"version":3,"sources":["components/ImageGallery/ImageGallery.module.css","components/ImageGalleryItem/ImageGalleryItem.module.css","components/Modal/Modal.module.css","components/Button/Button.module.css","components/Container/Container.module.css","components/Searchbar/Searchbar.js","components/ImageGalleryItem/ImageGalleryItem.js","components/Button/Button.js","components/Modal/Modal.js","services/api.js","components/ImageGallery/ImageGallery.js","components/Container/Container.js","App.js","index.js","components/Searchbar/Searchbar.module.css"],"names":["module","exports","Searchbar","onSubmit","useState","searchQuery","setSearchQuery","className","s","searchbar","event","preventDefault","trim","toast","searchForm","type","button","buttonLabel","value","onChange","currentTarget","toLowerCase","input","autoComplete","autoFocus","placeholder","ImageGalleryItem","src","alt","onClick","id","imageGalleryItem","imageGalleryItemImage","Button","modalRoot","document","querySelector","Modal","onClose","tags","createPortal","overlay","modal","Api","fetchImages","page","fetch","then","response","ok","json","Promise","reject","Error","Status","ImageGallery","gallery","setGallery","status","setStatus","setError","setPage","showModal","setShowModal","setAlt","largeImageURL","setLargeImageURL","useEffect","hits","length","prevState","handleScroll","catch","error","window","scrollTo","top","documentElement","scrollHeight","behavior","toggleModal","handleKeyDown","e","code","onOpen","addEventListener","removeEventListener","loader","color","height","width","imageGallery","map","Container","children","container","App","position","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.36c5bce0.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"imageGallery\":\"ImageGallery_imageGallery__2gy2l\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"imageGalleryItem\":\"ImageGalleryItem_imageGalleryItem__3Gu4s\",\"imageGalleryItemImage\":\"ImageGalleryItem_imageGalleryItemImage__13zpd\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"Modal_overlay__5c0RV\",\"modal\":\"Modal_modal__3KQAU\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"Button_button__3DuXR\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Container_container__3JSPM\"};","import { useState } from \"react\";\nimport { GoSearch } from \"react-icons/go\";\nimport { toast } from \"react-toastify\";\nimport s from \"./Searchbar.module.css\";\n\nexport default function Searchbar({ onSubmit }) {\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const handleQueryChange = (event) => {\n    setSearchQuery(event.currentTarget.value.toLowerCase());\n  };\n  const handleSubmit = (event) => {\n    event.preventDefault();\n    if (searchQuery.trim() === \"\") {\n      toast(\"Enter query in the search field.\");\n      return;\n    }\n    onSubmit(searchQuery);\n    setSearchQuery(\"\");\n  };\n  return (\n    <header className={s.searchbar}>\n      <form onSubmit={handleSubmit} className={s.searchForm}>\n        <button type=\"submit\" className={s.button}>\n          <span className={s.buttonLabel}>Search</span>\n          <GoSearch />\n        </button>\n\n        <input\n          value={searchQuery}\n          onChange={handleQueryChange}\n          className={s.input}\n          type=\"text\"\n          autoComplete=\"off\"\n          autoFocus\n          placeholder=\"Search images and photos\"\n        />\n      </form>\n    </header>\n  );\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport s from \"./ImageGalleryItem.module.css\";\n\nconst ImageGalleryItem = ({ src, alt, onClick, id }) => {\n  return (\n    <li\n      className={s.imageGalleryItem}\n      onClick={() => {\n        onClick(src, alt, id);\n      }}\n    >\n      <img src={src} alt={alt} className={s.imageGalleryItemImage} />\n    </li>\n  );\n};\n\nImageGalleryItem.propTypes = {\n  src: PropTypes.string,\n  alt: PropTypes.string,\n  onClick: PropTypes.func,\n};\nexport default ImageGalleryItem;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport s from \"./Button.module.css\";\n\nfunction Button({ onClick }) {\n  return (\n    <button type=\"button\" className={s.button} onClick={onClick}>\n      Load more\n    </button>\n  );\n}\n\nButton.propTypes = {\n  onClick: PropTypes.func,\n};\n\nexport default Button;\n","import React from \"react\";\nimport { createPortal } from \"react-dom\";\nimport PropTypes from \"prop-types\";\nimport s from \"./Modal.module.css\";\n\nconst modalRoot = document.querySelector(\"#modal-root\");\n\nfunction Modal({ onClose, src, tags }) {\n  return createPortal(\n    <div className={s.overlay} onClick={onClose}>\n      <div className={s.modal}>\n        <img src={src} alt={tags} />\n      </div>\n    </div>,\n    modalRoot\n  );\n}\n\nModal.propTypes = {\n  src: PropTypes.string,\n  tags: PropTypes.string,\n};\nexport default Modal;\n","const BASE_URL = \"https://pixabay.com/api/\";\nconst API_KEY = \"24006610-770c029dafc5e505b4312f4f7\";\n\n// export default function ImageAPI(searchQuery, page) {\n//   const url =\n//     BASE_URL +\n//     `?q=${searchQuery}&page=${page}&key=${API_KEY}&image_type=photo&orientation=horizontal&per_page=12`;\n//   return fetch(url).then((response) => {\n//     if (response.ok) {\n//       return response.json();\n//     }\n//     return Promise.reject(new Error(`Nothing were found`));\n//   });\n// }\n\nfunction fetchImages(searchQuery, page) {\n  return fetch(\n    BASE_URL +\n      `?q=${searchQuery}&page=${page}&key=${API_KEY}&image_type=photo&orientation=horizontal&per_page=12`\n  ).then((response) => {\n    if (response.ok) {\n      return response.json();\n    }\n\n    return Promise.reject(new Error(`Nothing were found`));\n  });\n}\nconst Api = {\n  fetchImages,\n};\n\nexport default Api;\n","import { useState, useEffect } from \"react\";\nimport { toast } from \"react-toastify\";\nimport Loader from \"react-loader-spinner\";\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\nimport s from \"./ImageGallery.module.css\";\nimport ImageGalleryItem from \"../ImageGalleryItem/ImageGalleryItem\";\nimport Button from \"../Button/Button\";\nimport Modal from \"../Modal/Modal\";\n// import ImageAPI from \"../../services/api\";\nimport Api from \"../../services/api\";\n\nconst Status = {\n  IDLE: \"idle\",\n  PENDING: \"pending\",\n  RESOLVED: \"resolved\",\n  REJECTED: \"rejected\",\n};\nexport default function ImageGallery({ searchQuery }) {\n  const [gallery, setGallery] = useState([]);\n  const [status, setStatus] = useState(Status.IDLE);\n  const [error, setError] = useState(null);\n  const [page, setPage] = useState(1);\n  const [showModal, setShowModal] = useState(false);\n  const [alt, setAlt] = useState(\"\");\n  const [largeImageURL, setLargeImageURL] = useState(\"\");\n\n  useEffect(() => {\n    if (!searchQuery) {\n      return;\n    }\n    setStatus(Status.PENDING);\n    Api.fetchImages(searchQuery, page)\n      .then((gallery) => {\n        if (gallery.hits.length === 0) {\n          return Promise.reject(\n            new Error(`Nothing were found with ${searchQuery}`)\n          );\n        } else {\n          setGallery((prevState) => [...prevState, ...gallery.hits]);\n          setStatus(Status.RESOLVED);\n          handleScroll();\n        }\n      })\n      .catch((error) => {\n        setError(error);\n        setStatus(Status.REJECTED);\n        toast(\"Someting went wrong\");\n      });\n  }, [page, searchQuery]);\n\n  const handleScroll = () => {\n    window.scrollTo({\n      top: document.documentElement.scrollHeight,\n      behavior: \"smooth\",\n    });\n  };\n  const loadMore = () => {\n    setPage((prevState) => prevState + 1);\n  };\n  const toggleModal = () => {\n    setShowModal(!showModal);\n  };\n\n  const handleKeyDown = (e) => {\n    if (e.code === \"Escape\") {\n      onClose();\n    }\n  };\n  const onOpen = (largeImageURL, alt) => {\n    setLargeImageURL(largeImageURL);\n    setAlt(alt);\n    window.addEventListener(\"keydown\", handleKeyDown);\n    toggleModal();\n  };\n  const onClose = () => {\n    setLargeImageURL(\"\");\n    setAlt(\"\");\n    window.removeEventListener(\"keydown\", handleKeyDown);\n    toggleModal();\n  };\n\n  if (status === Status.IDLE) {\n    return <div>Enter search query</div>;\n  }\n  if (status === Status.PENDING) {\n    return (\n      <Loader\n        className={s.loader}\n        type=\"Hearts\"\n        color=\"#cea8d67a\"\n        height={80}\n        width={80}\n      />\n    );\n  }\n  if (status === Status.REJECTED) {\n    return <div>Nothing were found</div>;\n  }\n\n  if (status === Status.RESOLVED) {\n    return (\n      <div>\n        {showModal && (\n          <Modal onClose={onClose} src={largeImageURL} tags={alt} />\n        )}\n        <ul className={s.imageGallery}>\n          {gallery.map(({ largeImageURL, tags, id }) => {\n            return (\n              <ImageGalleryItem\n                key={id}\n                src={largeImageURL}\n                alt={tags}\n                onClick={onOpen}\n              />\n            );\n          })}\n        </ul>\n        <Button onClick={loadMore} />\n      </div>\n    );\n  }\n}\n// class ImageGallery extends Component {\n//   state = {\n//     gallery: [],\n//     status: \"idle\",\n//     error: null,\n//     page: 1,\n//     showModal: false,\n//   };\n//   componentDidUpdate(prevProps, prevState) {\n//     if (prevProps.searchQuery !== this.props.searchQuery) {\n//       this.setState(() => ({ gallery: [] }), this.getItems);\n//     }\n// //\n//   getItems = () => {\n//     this.setState({ status: \"pending\" });\n//     ImageAPI(this.props.searchQuery, this.state.page)\n//       .then((gallery) => {\n//         if (gallery.hits.length === 0) {\n//           return Promise.reject(\n//             new Error(`Nothing were found with ${this.props.searchQuery}`)\n//           );\n//         } else {\n//           this.setState({\n//             gallery: [...this.state.gallery, ...gallery.hits],\n//             status: \"resolved\",\n//             searchQuery: this.props.searchQuery,\n//           });\n//         }\n//       })\n//       .catch((error) => {\n//         this.setState({ error, status: \"rejected\" });\n//         toast(\"Someting went wrong\");\n//       });\n//   };\n\n//   handleScroll = () => {\n//     window.scrollTo({\n//       top: document.documentElement.scrollHeight,\n//       behavior: \"smooth\",\n//     });\n//   };\n\n//   loadMore = () => {\n//     this.setState({\n//       page: this.state.page + 1,\n//     });\n//   };\n//   images(arr) {\n//     const newImgArr = [];\n//     arr.forEach(({ id, largeImageURL, tags }) => {\n//       newImgArr.push({ id, largeImageURL, tags });\n//     });\n//     return newImgArr;\n//   }\n\n//   toggleModal = () => {\n//     this.setState((prevState) => ({ showModal: !prevState.showModal }));\n//   };\n\n//   onOpen = (src, alt) => {\n//     this.setState({\n//       largeImageURL: src,\n//       alt: alt,\n//     });\n//     this.toggleModal();\n//   };\n//   onClose = () => {\n//     this.setState({\n//       largeImageURL: \"\",\n//       alt: \"\",\n//     });\n//   };\n//   render() {\n//     const { gallery, status, largeImageURL, alt, showModal } = this.state;\n\n//     if (status === \"idle\") {\n//       return <div>Enter search query</div>;\n//     }\n\n//     if (status === \"pending\") {\n//       return (\n//         <Loader\n//           className={s.loader}\n//           type=\"Hearts\"\n//           color=\"#cea8d67a\"\n//           height={80}\n//           width={80}\n//         />\n//       );\n//     }\n\n//     if (status === \"rejected\") {\n//       return <div>Nothing were found</div>;\n//     }\n\n//     if (status === \"resolved\") {\n//       return (\n//         <div>\n//           {showModal && (\n//             <Modal onClose={this.toggleModal} src={largeImageURL} tags={alt} />\n//           )}\n//           <ul className={s.imageGallery}>\n//             {gallery.map(({ largeImageURL, tags, id }) => {\n//               return (\n//                 <ImageGalleryItem\n//                   key={id}\n//                   src={largeImageURL}\n//                   alt={tags}\n//                   onClick={this.onOpen}\n//                 />\n//               );\n//             })}\n//           </ul>\n//           <Button onClick={this.loadMore} />\n//         </div>\n//       );\n//     }\n//   }\n// }\n\n// export default ImageGallery;\n","import s from \"./Container.module.css\";\nfunction Container({ children }) {\n  return <div className={s.container}>{children}</div>;\n}\n\nexport default Container;\n","import { useState } from \"react\";\nimport { ToastContainer } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport Searchbar from \"./components/Searchbar/Searchbar\";\nimport ImageGallery from \"./components/ImageGallery/ImageGallery\";\nimport \"./App.css\";\nimport Container from \"./components/Container/Container\";\n\nexport default function App() {\n  const [searchQuery, setSearchQuery] = useState(\"\");\n\n  return (\n    <>\n      <Container>\n        <Searchbar onSubmit={setSearchQuery} />\n      </Container>\n      <Container>\n        <ImageGallery searchQuery={searchQuery} />\n      </Container>\n      <ToastContainer position=\"top-center\" />\n    </>\n  );\n}\n\n// class App extends Component {\n//   state = {\n//     searchQuery: \"\",\n//   };\n//   handleFormSubmit = (searchQuery) => {\n//     this.setState({ searchQuery });\n//   };\n\n//   render() {\n//     const { searchQuery } = this.state;\n//     return (\n//       <>\n//         <Container>\n//           <Searchbar onSubmit={this.handleFormSubmit} />\n//         </Container>\n//         <Container>\n//           <ImageGallery searchQuery={searchQuery} />\n//         </Container>\n//         <ToastContainer position=\"top-center\" />\n//       </>\n//     );\n//   }\n// }\n\n// export default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"searchbar\":\"Searchbar_searchbar__QXhuK\",\"searchForm\":\"Searchbar_searchForm__1hs9J\",\"button\":\"Searchbar_button__1-GUF\",\"buttonLabel\":\"Searchbar_buttonLabel__JkOFn\",\"input\":\"Searchbar_input__2K8kU\"};"],"sourceRoot":""}